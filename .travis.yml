language: cpp
compiler: gcc
dist: bionic

addons:
  apt_packages:
    - cmake
    - libxrandr-dev
    - libudev-dev
    - libopenal-dev
    - libflac-dev
    - libvorbis-dev
    - libgl1-mesa-dev

    
before_install:
    #- sudo apt-get update
    
    #cmake
    #- sudo apt-get install apt-transport-https ca-certificates gnupg software-properties-common wget
    #- wget -O - https://apt.kitware.com/keys/kitware-archive-latest.asc 2>/dev/null | sudo apt-key add -
    #- sudo apt-add-repository 'deb https://apt.kitware.com/ubuntu/ bionic main'
    #- sudo apt-get update
    
    #dunno
    #- sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
    #- sudo add-apt-repository universe
    #- sudo apt-get update -qq

install: 
    # C++17
  #- sudo apt-get install -qq g++-6
  #- sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-6 90
    # cppcheck
  - sudo apt-get install -qq cppcheck
  
    #- sudo apt-get install cmake=3.15.3-0kitware1
    #- sudo apt-get install libsfml-dev
    #- sudo apt-cache policy cmake
    #- sudo apt-cache policy libsfml-dev

before_script:
    - git clone https://github.com/sfml/sfml && cd sfml && mkdir build && cd build &&
      cmake .. $CMAKE_FLAGS -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=../install
    - cmake --build . --target install
    - cd ../..

script: 
  #- g++ main.cpp -std=c++17 -o travis_gcc_cpp17
  #- ./travis_gcc_cpp17
  # cppcheck
  #- cppcheck --quiet --error-exitcode=1 . 
    - cd build
    - cmake -DSFML_DIR=sfml/install/lib/cmake/SFML/ ..
    - cppcheck --quiet . 